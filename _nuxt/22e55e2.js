(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{798:function(t,e,n){var content=n(845);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("4b6bfa9b",content,!0,{sourceMap:!1})},844:function(t,e,n){"use strict";n(798)},845:function(t,e,n){(e=n(14)(!1)).push([t.i,".chat-field.v-textarea.v-text-field--solo .v-input__prepend-inner,.chat-field.v-textarea.v-text-field--solo .v-input__prepend-inner .v-file-input{margin-top:0;padding-top:0}",""]),t.exports=e},869:function(t,e,n){"use strict";n.r(e);var r=n(69),l=n(90),c=n.n(l),o=n(215),h=n(49),d=n(757),f=n(766),v=n(758),component=Object(r.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-card",{attrs:{height:"230",color:"black"}},[e("v-card-text",{staticClass:"fill-height d-flex flex-column justify-center align-center"},[e("div",{staticClass:"text-h1 mb-5 white--text"},[this._v("Ahoy!")]),this._v(" "),e("div",{staticClass:"text-h4"},[this._v("Chat for Pirates & Scallywags")])])],1)],1),this._v(" "),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-card",{attrs:{height:"230",color:"teal darken-4",hover:"",to:"/user/sign-up"}},[e("v-card-text",{staticClass:"fill-height d-flex justify-center align-center"},[e("div",{staticClass:"text-h3"},[this._v("Register")])])],1)],1),this._v(" "),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("v-card",{attrs:{height:"230",color:"grey darken-4",hover:"",to:"/user/sign-in"}},[e("v-card-text",{staticClass:"fill-height d-flex justify-center align-center"},[e("div",{staticClass:"text-h3"},[this._v("Login")])])],1)],1)],1)],1)}),[],!1,null,null,null),m=component.exports;c()(component,{VCard:o.a,VCardText:h.b,VCol:d.a,VContainer:f.a,VRow:v.a});n(24),n(57);var x={name:"ChatApp",components:{},data:function(){return{files:[],message:""}},computed:{user:function(){return this.users[this.channel]},users:function(){return this.$store.state.chat.users},account:function(){return this.$store.state.chat.account},channels:{get:function(){return this.$store.getters["chat/channels"]},set:function(t){this.$store.dispatch("chat/setChannels",{channels:t})}},channel:{get:function(){return this.$store.state.chat.channel},set:function(t){return this.$store.dispatch("chat/setChannel",{channel:t})}},messages:{get:function(){return this.channels[this.channel].messages},set:function(t){this.$store.dispatch("chat/addMessage",{channel:this.channel,message:t})}},recent:{get:function(){return this.channels[this.channel].recent},set:function(t){this.$store.dispatch("chat/setRecent",{channel:this.channel,recent:t})}}},watch:{channel:function(t,e){this.updateScroll()}},created:function(){this.channel="alice";for(var t=0;t<30;t++)this.addMessage("Message ".concat(t+1));this.channel="bob";for(var e=0;e<30;e++)this.addMessage("Message ".concat(e+1));this.channel="alice"},mounted:function(){this.updator=this.updateScroll.bind(this),this.addEvent(window,"resize",this.updator),this.updateScroll()},beforeDestroy:function(){window.removeEventListener("resize",this.updator)},methods:{addEvent:function(object,t,e){null!=object&&void 0!==object&&(object.addEventListener?object.addEventListener(t,e,!1):object.attachEvent?object.attachEvent("on".concat(t),e):object["on".concat(t)]=e)},updateScroll:function(){var t=this.$refs.scroller;t.scrollTop=t.scrollHeight},addMessage:function(t){t=(t=t||this.message).replace(/\r?\n/g,"<br />");var e=Math.random()>.5?"me":"other",n="me"===e?this.account:this.user,r={user:n.username,name:n.name,avatar:n.avatar,color:n.color,time:Date.now(),message:t};this.recent.user===r.user?r.multi=!0:"other"===e&&this.$store.dispatch("chat/incrementUnread",{channel:this.channel}),this.recent=r,this.messages=r},onSend:function(){var t=this;this.addMessage(),this.message="",setTimeout((function(){t.updateScroll()}),0)}}},_=(n(844),n(216)),y=n(804),C=n(746),k=n(794),w=Object(r.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fill-height d-flex flex-column"},[n("div",{staticClass:"flex-grow-1",staticStyle:{position:"relative"}},[n("div",{staticClass:"d-flex flex-column justify-end",staticStyle:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0"}},[n("div",{ref:"scroller",staticStyle:{overflow:"auto"}},t._l(t.messages,(function(e){return n("div",{key:e.id,staticClass:"d-flex align-start"},[e.multi?n("v-avatar",{staticClass:"ma-2 ml-3",attrs:{height:"0",size:"40"}}):n("v-avatar",{staticClass:"ma-2 ml-3",attrs:{color:e.color,size:"40"}},[t._v("\n            "+t._s(e.avatar)+"\n          ")]),t._v(" "),n("div",{class:"flex-grow-1 d-flex flex-column pa-2 pb-1 "+(e.multi?"pt-0":"pt-3")},[e.multi?t._e():n("div",{staticClass:"body-1"},[n("span",{staticClass:"body-1 grey--text text--lighten-3"},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"caption grey--text text--lighten-1"},[t._v("Â ")]),t._v(" "),n("span",{staticClass:"caption grey--text text--darken-1"},[t._v(t._s(t._f("datetime")(e.time)))])]),t._v(" "),n("div",{staticClass:"body-2 text-justify grey--text",domProps:{innerHTML:t._s(e.message)}})])],1)})),0)])]),t._v(" "),n("div",{staticClass:"pa-2 pb-4 grey darken-3"},[t._e(),t._v(" "),n("v-textarea",{ref:"textform",staticClass:"chat-field",attrs:{rows:"1","auto-grow":"",autofocus:"","hide-details":"","single-line":"",label:"Message",solo:"","append-icon":"mdi-send"},on:{"click:append":t.onSend,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.updateScroll(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.onSend(e))}]},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[n("v-file-input",{attrs:{"hide-input":"","hide-details":"",multiple:"",accept:"image/*"},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})]},proxy:!0}],null,!1,3095990144),model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)])}),[],!1,null,null,null),S=w.exports;c()(w,{VAvatar:_.a,VFileInput:y.a,VTextField:C.a,VTextarea:k.a});var $={name:"HomePage",computed:{currentTabComponent:function(){return this.$store.getters.user.auth?S:m}},data:function(){return{}},methods:{}},E=Object(r.a)($,(function(){var t=this.$createElement;return(this._self._c||t)(this.currentTabComponent,{tag:"component"})}),[],!1,null,null,null);e.default=E.exports}}]);